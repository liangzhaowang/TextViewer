<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>文本浏览系统</title>
    <link rel="stylesheet" href="static/css/bootstrap.min.css">
    <script src="static/js/jquery-3.3.1.js"></script>
    <script src="static/js/bootstrap.min.js"></script>
    <!--script src="index.js"></script-->
    <script style="text/javascript">
        String.prototype.replaceAll = function(a, b) {
            return this.replace(new RegExp(a,"gm"), b);
        }
        String.prototype.Trim = function(){
            return this.replace(/(^\s*)|(\s*$)/g, "");
        }
        function search(){
            $("#lstResult").html('<a href="#" class="list-group-item active">查询结果</a>')
            var keyword = $("#keyword").val();
            $.ajax({
                url: "search/" + keyword + "/",
                success: function( result ) {
                    JSON.parse(result)["result"].forEach(function(value){
                        $("#lstResult").append("<a href='#' class='list-group-item' onclick='getcontent(this)'>" + value + "</a>");
                    });
                }
            });
        }
        function getcontent(obj){
            $.ajax({
                url: "getcontent/" + $(obj).text() + "/",
                success: function( result ) {
                    kw = $("#keyword").val();
                    kws = kw.Trim().split(" ")
                    result = result.replaceAll("\n", "<br />")
                    kws.forEach(function(value){
                        result = result.replaceAll(value, "<font style='color:red; font-size: 14pt'>" + value + "</font>");
                    })

                    $("#content").html(result);
                }
            });
        }

    </script>
</head>
<body style="background-color:burlywood;">
<div class="container" style="width:90%">
    <div class="row" style="margin-top:10px">
        <div class="col-sm-3">
            <div class="row">
                <div class="input-group">
                <input id="keyword" type="text" class="form-control" value="晴文">
                <span class="input-group-btn">
                    <button class="btn btn-default" type="button" onclick="search()">Go!</button>
                </span>
                </div>
            </div>
            <div id="lstResult" class="row" style="margin-top:5px">
                <a href="#" class="list-group-item active">查询结果</a>
            </div>
        </div>
        <div class="col-sm-9">
            <div id="content" style="width:100%; height:600px; overflow-y: scroll">
            </div>
        </div>
    </div>
</div>
</body>
</html>